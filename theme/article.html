<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <meta name="author" content="Dan Croak" />
    <title>{{.Article.Title}}</title>
    <link rel="icon" href="/images/favicon.ico" />
    <link rel="apple-touch-icon" href="/images/apple-touch-icon.png" />
    <style>
      :root {
        /* sizes */
        --code-max-width: 1400px;
        --content-max-width: 700px;

        /* Light mode */
        --charcoal: rgb(20, 20, 20);
        --pink: rgb(215, 0, 95);
        --purple: rgb(150, 100, 200);
        --purple-faded: rgb(150, 100, 200, 0.1);
        --orange: rgb(245, 163, 20);
        --white: rgb(255, 255, 255);
        --body-bg: rgb(252, 242, 232);
        --body-fg: rgb(30, 30, 30);
        --code-bg: var(--white);
        --code-fg: rgb(30, 30, 30);
        --link-bg-hover: rgb(180, 120, 220, 0.2);
        --link-color: rgb(100, 50, 150);
        --link-underline: rgb(180, 120, 220, 0.5);
        --link-underline-hover: rgb(100, 50, 150);

        /* Dark mode */
        @media (prefers-color-scheme: dark) {
          --charcoal: rgb(240, 240, 240);
          --pink: rgb(255, 100, 150);
          --purple: rgb(180, 120, 220);
          --purple-faded: rgb(180, 120, 220, 0.1);
          --yellow: rgb(255, 208, 128);
          --white: rgb(255, 255, 255);
          --body-bg: rgb(25, 30, 45);
          --body-fg: rgb(255, 255, 255);
          --code-bg: rgba(123, 148, 206, 0.1);
          --code-fg: var(--white);
          --link-bg-hover: rgb(150, 100, 200, 0.2);
          --link-color: rgb(150, 100, 200);
          --link-underline: rgb(150, 100, 200, 0.5);
          --link-underline-hover: rgb(150, 100, 200);
        }
      }
      html,
      body {
        background-color: var(--body-bg);
        color: var(--body-fg);
        font-family: system-ui, -apple-system, Roboto, "Helvetica", "Arial",
          sans-serif;
        margin: 0;
        padding: 0;
      }
      html {
        font-size: 16px;
        line-height: 1.5;
      }
      body {
        background-color: var(--body-bg);
        color: var(--body-fg);
        text-rendering: optimizelegibility;
        -webkit-font-smoothing: antialiased;
      }
      a {
        border-bottom: 2px solid var(--link-underline);
        color: var(--link-color);
        outline: 0;
        text-decoration: none;
        transition: all 0.2s ease;
      }
      a:hover {
        background-color: var(--link-bg-hover);
        border-bottom: 2px solid var(--link-underline-hover);
      }
      .container {
        margin: 3rem;
        max-width: var(--code-max-width);
      }
      a.logo {
        border: none;
      }
      nav img {
        border-radius: 50%;
        display: block;
        margin-right: 8px;
        width: 64px;
      }
      article {
        margin: 1.5rem 0;
      }
      h1 {
        color: var(--charcoal);
        font-size: 2rem;
        line-height: 2rem;
        margin-bottom: 5px;
        max-width: var(--content-max-width);

        /* Dark mode */
        @media (prefers-color-scheme: dark) {
          color: var(--white);
        }
      }
      time {
        color: rgb(150, 150, 150);
      }
      h2 {
        font-size: 1.2rem;
        margin-block-start: 1.25em;
        margin-block-end: 0.5em;
      }
      h2:hover {
        cursor: pointer;
      }
      p {
        margin: 0 0 1.5rem;
        max-width: 100%;
        width: var(--content-max-width);
      }
      pre {
        margin-bottom: 1.5rem;
      }
      article img {
        width: 100%;
      }
      blockquote {
        background-color: var(--mask);
        border-left: 4px solid var(--theme-highlight);
        margin: 0;
        max-width: var(--content-max-width);
        padding: 5px 25px;
      }
      ul {
        margin: 1rem 0;
      }
      li {
        margin: 0.5rem 0;
        max-width: 100%;
        width: var(--content-max-width);
      }
      header {
        margin: 20px 0 30px 0;
      }
      .author {
        color: var(--body-fg);
        font-weight: bold;
      }
      pre {
        background-color: var(--code-bg);
        border-radius: 3px;
        overflow-x: scroll;
        margin: 0 0 1.5rem 0;
        padding: 10px 15px;
        word-wrap: normal;
      }
      code {
        color: var(--code-fg);
        font-family: "SFMono-Regular", Consolas, Monaco, Menlo, monospace;
        font-size: 0.8rem;
        margin: 0;
        padding: 0;
        word-wrap: break-word;
      }
      :not(pre) > code {
        background-color: var(--code-bg);
        margin: 0 0.05em;
        padding: 3px 5px;
      }
      td,
      th {
        padding: 0 20px 5px 0;
      }
      th {
        text-align: left;
      }
      @media (max-width: 1000px) {
        .container {
          margin: 2rem;
          max-width: 92.5%;
        }
      }
      /* mobile */
      @media (max-width: 700px) {
        body {
          font-size: 0.9rem;
        }
        .container {
          margin: 1rem;
          max-width: 92.5%;
        }
        h2 {
          margin: 2rem 0 0.5rem;
        }
        blockquote {
          padding: 5px 15px;
        }
        p {
          margin: 1rem 0;
        }
      }
      /* syntax highlighting */
      .chroma .err,
      .chroma .gh,
      .chroma .kn,
      .chroma .kp,
      .chroma .m,
      .chroma .mi,
      .chroma .no,
      .chroma .vi,
      .chroma .ss {
        color: var(--pink);
      }
      .chroma .kc,
      .chroma .kd,
      .chroma .n,
      .chroma .nt,
      .chroma .nx {
        /* Light mode */
        color: var(--body-fg);

        /* Dark mode */
        @media (prefers-color-scheme: dark) {
          color: var(--white);
        }
      }
      .chroma .k,
      .chroma .nb,
      .chroma .nf {
        color: var(--purple);
      }
      .chroma .no,
      .chroma .s,
      .chroma .s2 {
        /* Light mode */
        color: var(--orange);

        /* Dark mode */
        @media (prefers-color-scheme: dark) {
          color: var(--yellow);
        }
      }
      .chroma .c,
      .chroma .c1,
      .chroma .ch,
      .chroma .cp,
      .chroma .o,
      .chroma .p {
        /* Light mode */
        color: var(--body-fg);

        /* Dark mode */
        @media (prefers-color-scheme: dark) {
          color: var(--light-gray);
        }
      }
    </style>
  </head>
  <body>
    <div class="container">
      <nav>
        <a class="logo" href="/">
          <img
            alt="Dan's profile photo"
            src="/images/logo.png"
            width="64px"
            height="64px"
          />
        </a>
      </nav>

      <article>
        <header>
          <h1>{{.Article.Title}}</h1>

          <time> updated {{.Article.UpdatedOn}} </time>
        </header>

        {{.Article.Body}}
      </article>

      <footer>
        <a href="/">&larr; All articles</a>
      </footer>
    </div>

    <script>
      function each(selector, fn) {
        Array.prototype.forEach.call(document.querySelectorAll(selector), fn);
      }

      function ready(fn) {
        if (document.readyState != "loading") {
          fn();
        } else {
          document.addEventListener("DOMContentLoaded", fn);
        }
      }

      ready(function () {
        each("article h2", function (el, i) {
          el.addEventListener("click", function () {
            location.href = "#" + el.id;
          });
        });
      });
    </script>
  </body>
</html>
